/*! videojs-preroll - v1.1.0 - 2017-03-07
* Copyright (c) 2017 Sano Webdevelopment;
* Copyright (c) 2014 The Onion
* Licensed MIT */
!function(a,b){"use strict";function c(a){if(document.cookie.length>0){var b=document.cookie.indexOf(a+"=");if(-1!==b){b=b+a.length+1;var c=document.cookie.indexOf(";",b);return-1===c&&(c=document.cookie.length),document.cookie.substring(b,c)}}return void 0}function d(a){if(a.playNextAdInMs>0&&a.playNextAdInMs<=26064e5){var b=c("Sardius_DisablePreroll");if(b)return!1}return!0}var e,f={src:"",href:"",target:"_blank",allowSkip:!0,skipTime:5,repeatAd:!1,adSign:!1,showRemaining:!1,adsOptions:{},playNextAdInMs:-1,auto:!1,lang:{skip:"Skip","skip in":"Skip in ",advertisement:"Advertisement","video start in":"Video will start in: "}},g=function(a,b,c){if("undefined"!=typeof c&&"string"!=typeof c){var d;if(c){var e=new Date;e.setTime(e.getTime()+c),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"}};e=function(c){var e=b.mergeOptions(f,c),h=this;return d(e)?(Array.isArray(e.src)&&(e.src=e.src[Math.floor(Math.random()*e.src.length)]),h.ads(e.adsOptions),h.preroll={adDone:!1,settings:e},h.on("contentupdate",function(){h.preroll.shouldPlayPreroll()?h.trigger("adsready"):h.trigger("adscanceled"),e.auto&&h.play()}),h.on("readyforpreroll",function(){if(!h.preroll.shouldPlayPreroll())return void h.trigger("adscanceled");if(h.ads.startLinearAdMode(),h.src(e.src),h.one("durationchange",function(){h.play()}),h.one("progress",function(){h.play()}),h.one("adloadstart",function(){h.play()}),""!==e.href){var b=document.createElement("a");b.className="preroll-blocker",b.href=e.href,b.target=e.target||"_blank",b.onclick=function(){h.trigger("adclick")},h.preroll.blocker=b,h.el().insertBefore(b,h.controlBar.el())}if(e.adSign!==!1){var c=document.createElement("div");c.className="advertisement-box",h.preroll.adBox=c,h.el().appendChild(c),h.preroll.adBox.innerHTML=e.lang.advertisement}if(e.showRemaining!==!1&&e.allowSkip===!1){var d=document.createElement("div");d.className="remaining-time",h.preroll.remainingTime=d,h.el().appendChild(d),h.preroll.remainingTime.innerHTML=e.lang["video start in"],h.on("adtimeupdate",h.preroll.timeremaining)}if(e.allowSkip!==!1){var f=document.createElement("div");f.className="preroll-skip-button",h.preroll.skipButton=f,h.el().appendChild(f),f.onclick=function(b){var c=c||a.Event;return(" "+h.preroll.skipButton.className+" ").indexOf(" enabled ")>=0&&h.preroll.exitPreroll(),void 0===c.prototype.stopPropagation?!1:void b.stopPropagation()},h.on("adtimeupdate",h.preroll.timeupdate)}h.one("adended",h.preroll.exitPreroll),h.one("error",h.preroll.prerollError)}),h.preroll.shouldPlayPreroll=function(){return""===e.src?!1:h.preroll.adDone===!0?!1:!0},h.preroll.exitPreroll=function(){"undefined"!=typeof h.preroll.skipButton&&h.preroll.skipButton.parentNode.removeChild(h.preroll.skipButton),"undefined"!=typeof h.preroll.adBox&&h.preroll.adBox.parentNode.removeChild(h.preroll.adBox),"undefined"!=typeof h.preroll.remainingTime&&h.preroll.remainingTime.parentNode.removeChild(h.preroll.remainingTime),"undefined"!=typeof h.preroll.blocker&&h.preroll.blocker.parentNode.removeChild(h.preroll.blocker),h.off("adended",h.preroll.exitPreroll),h.off("error",h.preroll.prerollError),e.repeatAd!==!0&&(h.preroll.adDone=!0),e.playNextAdInMs>0&&e.playNextAdInMs<=26064e5&&g("Sardius_DisablePreroll",!0,e.playNextAdInMs),h.loadingSpinner.show(),h.posterImage.hide(),h.bigPlayButton.hide(),h.ads.endLinearAdMode()},h.preroll.timeupdate=function(a){h.loadingSpinner.hide();var b=Math.ceil(e.skipTime-h.currentTime());b>0?h.preroll.skipButton.innerHTML=e.lang["skip in"]+b+"...":-1===(" "+h.preroll.skipButton.className+" ").indexOf(" enabled ")&&(h.preroll.skipButton.className+=" enabled",h.preroll.skipButton.innerHTML=e.lang.skip)},h.preroll.timeremaining=function(a){h.loadingSpinner.hide();var b=Math.ceil(h.remainingTime());b>0&&(h.preroll.remainingTime.innerHTML=e.lang["video start in"]+b)},h.preroll.prerollError=function(a){h.preroll.exitPreroll()},void(h.currentSrc()&&(h.preroll.shouldPlayPreroll()?h.trigger("adsready"):h.trigger("adscanceled")))):(h.preroll={adDone:!0},void(e.auto&&(h.on("loadedmetadata",function(){h.play()}),h.on("loadstart",function(){h.play()}))))},b.plugin("preroll",e)}(window,window.videojs);