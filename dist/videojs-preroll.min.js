/*! videojs-preroll - v1.1.0 - 2017-03-06
* Copyright (c) 2017 Sano Webdevelopment;
* Copyright (c) 2014 The Onion
* Licensed MIT */
!function(a,b){"use strict";function c(a){if(document.cookie.length>0){var b=document.cookie.indexOf(a+"=");if(-1!==b){b=b+a.length+1;var c=document.cookie.indexOf(";",b);return-1===c&&(c=document.cookie.length),document.cookie.substring(b,c)}}return void 0}function d(a){if(a.playNextAdInMs>=0&&a.playNextAdInMs<=26064e5){var b=c("Sardius_DisablePreroll");if(b)return!1;g("Sardius_DisablePreroll",!0,a.playNextAdInMs)}return!0}var e,f={src:"",href:"",target:"_blank",allowSkip:!0,skipTime:5,repeatAd:!1,adSign:!1,showRemaining:!1,adsOptions:{},playNextAdInMs:-1,auto:!1,lang:{skip:"Skip","skip in":"Skip in ",advertisement:"Advertisement","video start in":"Video will start in: "}},g=function(a,b,c){if("undefined"!=typeof c&&"string"!=typeof c){var d;if(c){var e=new Date;e.setTime(e.getTime()+c),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"}};e=function(c){var e=b.mergeOptions(f,c),g=this;return d(e)?(Array.isArray(e.src)&&(e.src=e.src[Math.floor(Math.random()*e.src.length)]),g.ads(e.adsOptions),g.preroll={adDone:!1},g.on("contentupdate",function(){g.preroll.shouldPlayPreroll()?g.trigger("adsready"):g.trigger("adscanceled"),e.auto&&g.play()}),g.on("readyforpreroll",function(){if(!g.preroll.shouldPlayPreroll())return void g.trigger("adscanceled");if(g.ads.startLinearAdMode(),g.src(e.src),g.one("durationchange",function(){g.play()}),g.one("progress",function(){g.play()}),g.one("adloadstart",function(){g.play()}),""!==e.href){var b=document.createElement("a");b.className="preroll-blocker",b.href=e.href,b.target=e.target||"_blank",b.onclick=function(){g.trigger("adclick")},g.preroll.blocker=b,g.el().insertBefore(b,g.controlBar.el())}if(e.adSign!==!1){var c=document.createElement("div");c.className="advertisement-box",g.preroll.adBox=c,g.el().appendChild(c),g.preroll.adBox.innerHTML=e.lang.advertisement}if(e.showRemaining!==!1&&e.allowSkip===!1){var d=document.createElement("div");d.className="remaining-time",g.preroll.remainingTime=d,g.el().appendChild(d),g.preroll.remainingTime.innerHTML=e.lang["video start in"],g.on("adtimeupdate",g.preroll.timeremaining)}if(e.allowSkip!==!1){var f=document.createElement("div");f.className="preroll-skip-button",g.preroll.skipButton=f,g.el().appendChild(f),f.onclick=function(b){var c=c||a.Event;return(" "+g.preroll.skipButton.className+" ").indexOf(" enabled ")>=0&&g.preroll.exitPreroll(),void 0===c.prototype.stopPropagation?!1:void b.stopPropagation()},g.on("adtimeupdate",g.preroll.timeupdate)}g.one("adended",g.preroll.exitPreroll),g.one("error",g.preroll.prerollError)}),g.preroll.shouldPlayPreroll=function(){return""===e.src?!1:g.preroll.adDone===!0?!1:!0},g.preroll.exitPreroll=function(){"undefined"!=typeof g.preroll.skipButton&&g.preroll.skipButton.parentNode.removeChild(g.preroll.skipButton),"undefined"!=typeof g.preroll.adBox&&g.preroll.adBox.parentNode.removeChild(g.preroll.adBox),"undefined"!=typeof g.preroll.remainingTime&&g.preroll.remainingTime.parentNode.removeChild(g.preroll.remainingTime),"undefined"!=typeof g.preroll.blocker&&g.preroll.blocker.parentNode.removeChild(g.preroll.blocker),g.off("adended",g.preroll.exitPreroll),g.off("error",g.preroll.prerollError),e.repeatAd!==!0&&(g.preroll.adDone=!0),g.loadingSpinner.show(),g.posterImage.hide(),g.bigPlayButton.hide(),g.ads.endLinearAdMode()},g.preroll.timeupdate=function(a){g.loadingSpinner.hide();var b=Math.ceil(e.skipTime-g.currentTime());b>0?g.preroll.skipButton.innerHTML=e.lang["skip in"]+b+"...":-1===(" "+g.preroll.skipButton.className+" ").indexOf(" enabled ")&&(g.preroll.skipButton.className+=" enabled",g.preroll.skipButton.innerHTML=e.lang.skip)},g.preroll.timeremaining=function(a){g.loadingSpinner.hide();var b=Math.ceil(g.remainingTime());b>0&&(g.preroll.remainingTime.innerHTML=e.lang["video start in"]+b)},g.preroll.prerollError=function(a){g.preroll.exitPreroll()},void(g.currentSrc()&&(g.preroll.shouldPlayPreroll()?g.trigger("adsready"):g.trigger("adscanceled")))):(g.preroll={adDone:!0},void(e.auto&&(g.on("loadedmetadata",function(){g.play()}),g.on("loadstart",function(){g.play()}))))},b.plugin("preroll",e)}(window,window.videojs);